<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Store and Retrieve Multiple Forms Data</title>
    <style>
        .data-display {
            color: blue;
            font-weight: bold;
            white-space: pre-wrap; /* Preserves white space and line breaks */
            display: none; /* Hide display area initially */
        }
        .form-container {
            margin-bottom: 20px;
        }
        .form-container img {
            width: 100px; /* Example width, adjust as needed */
            height: auto;
        }
        .data-display img {
            width: 200px; /* Fixed width for displayed images */
            height: auto; /* Maintain aspect ratio */
        }
        .remove-btn {
            margin-left: 10px;
            color: red;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="form-container">
        <h1>Form 1</h1>
        <h3 id="form1Desc">This is a description for Form 1.</h3>
        <img src="../public/img/samantha-gades-lUh8K27Fn38-unsplash.jpg" alt="Image for Form 1" id="form1Image">
        <button onclick="storeFormData('form1', 'form1Desc', 'form1Image')">Store Form 1 Data</button>
    </div>

    <div class="form-container">
        <h1>Form 2</h1>
        <h3 id="form2Desc">This is a description for Form 2.</h3>
        <img src="../public/img/iphone.png" alt="Image for Form 2" id="form2Image">
        <button onclick="storeFormData('form2', 'form2Desc', 'form2Image')">Store Form 2 Data</button>
    </div>

    <div class="form-container">
        <h1>Form 3</h1>
        <h3 id="form3Desc">This is a description for Form 3.</h3>
        <img src="../public/img/contact-header.jpg" alt="Image for Form 3" id="form3Image">
        <button onclick="storeFormData('form3', 'form3Desc', 'form3Image')">Store Form 3 Data</button>
    </div>

    <div class="form-container">
        <h1>Form 4</h1>
        <h3 id="form4Desc">This is a description for Form 4.</h3>
        <img src="../public/img/contact-bg.png" alt="Image for Form 4" id="form4Image">
        <button onclick="storeFormData('form4', 'form4Desc', 'form4Image')">Store Form 4 Data</button>
    </div>

    <button onclick="displayStoredData()">Display All Stored Data</button>

    <div id="displayDiv" class="data-display"></div>

    <script>
        const storageKey = 'formDataList';

        function storeFormData(formId, descId, imgId) {
            const data = {
                formId: formId,
                description: document.getElementById(descId).textContent,
                imageSrc: document.getElementById(imgId).src
            };

            let formDataList = JSON.parse(localStorage.getItem(storageKey)) || [];
            const formIndex = formDataList.findIndex(item => item.formId === formId);

            if (formIndex !== -1) {
                // Update existing form data
                formDataList[formIndex] = data;
            } else {
                // Add new form data
                formDataList.push(data);
            }

            localStorage.setItem(storageKey, JSON.stringify(formDataList));
        }

        function displayStoredData() {
            const formDataList = JSON.parse(localStorage.getItem(storageKey)) || [];
            const displayDiv = document.getElementById('displayDiv');
            displayDiv.innerHTML = ''; // Clear previous content

            if (formDataList.length === 0) {
                displayDiv.textContent = 'No data available';
            } else {
                const ul = document.createElement('ul');
                formDataList.forEach((data, index) => {
                    const li = document.createElement('li');
                    const img = document.createElement('img');
                    img.src = data.imageSrc;
                    img.alt = 'Stored Image';
                    img.style.width = '200px'; // Set fixed width
                    img.style.height = 'auto'; // Maintain aspect ratio

                    li.textContent = data.description;
                    li.appendChild(document.createElement('br')); // Add line break
                    li.appendChild(img);

                    const removeBtn = document.createElement('span');
                    removeBtn.textContent = 'Remove';
                    removeBtn.classList.add('remove-btn');
                    removeBtn.onclick = () => removeFormData(index);
                    li.appendChild(removeBtn);

                    ul.appendChild(li);
                });
                displayDiv.appendChild(ul);
            }

            displayDiv.style.display = 'block'; // Show the display area
        }

        function removeFormData(index) {
            let formDataList = JSON.parse(localStorage.getItem(storageKey)) || [];
            formDataList.splice(index, 1); // Remove the item at the given index
            localStorage.setItem(storageKey, JSON.stringify(formDataList));
            displayStoredData(); // Refresh the display
        }

        // Optionally, you can clear the stored data
        function clearStoredData() {
            localStorage.removeItem(storageKey);
            const displayDiv = document.getElementById('displayDiv');
            displayDiv.innerHTML = ''; // Clear display content
            displayDiv.style.display = 'none'; // Hide the display area
        }
    </script>
</body>
</html>
