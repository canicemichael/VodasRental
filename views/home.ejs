<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Multiple Forms Data in Cookies</title>
    <link rel="stylesheet" href="styles.css" />
    <style>
      body {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        margin: 0;
      }

      form,
      button {
        margin: 10px;
        font-size: 16px;
      }

      #dataDisplay,
      #cookieCountDisplay {
        margin-top: 20px;
        font-size: 18px;
      }
    </style>
  </head>
  <body>
    <form id="form1">
      <h3>Form 1</h3>
      <label for="name1">Name:</label>
      <input type="text" id="name1" name="name" required />
      <br />
      <label for="email1">Email:</label>
      <input type="email" id="email1" name="email" required />
      <br />
      <button type="submit">Submit Form 1</button>
    </form>

    <form id="form2">
      <h3>Form 2</h3>
      <label for="name2">Name:</label>
      <input type="text" id="name2" name="name" required />
      <br />
      <label for="email2">Email:</label>
      <input type="email" id="email2" name="email" required />
      <br />
      <button type="submit">Submit Form 2</button>
    </form>

    <form id="form3">
      <h3>Form 3</h3>
      <label for="name3">Name:</label>
      <input type="text" id="name3" name="name" required />
      <br />
      <label for="email3">Email:</label>
      <input type="email" id="email3" name="email" required />
      <br />
      <button type="submit">Submit Form 3</button>
    </form>

    <button id="showDataButton">Show Stored Data</button>
    <div id="dataDisplay"></div>
    <div id="cookieCountDisplay"></div>

    <!-- Vertically centered scrollable modal -->

    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
        Launch static backdrop modal
      </button>
      
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">...</div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Close
            </button>
            <button type="button" class="btn btn-primary">Understood</button>
          </div>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const forms = [
          {
            formId: "form1",
            nameField: "name1",
            emailField: "email1",
            nameCookie: "form_name1",
            emailCookie: "form_email1",
          },
          {
            formId: "form2",
            nameField: "name2",
            emailField: "email2",
            nameCookie: "form_name2",
            emailCookie: "form_email2",
          },
          {
            formId: "form3",
            nameField: "name3",
            emailField: "email3",
            nameCookie: "form_name3",
            emailCookie: "form_email3",
          },
        ];

        const cookieCountDisplay =
          document.getElementById("cookieCountDisplay");

        forms.forEach((formConfig) => {
          const form = document.getElementById(formConfig.formId);

          form.addEventListener("submit", (event) => {
            event.preventDefault();
            const formData = new FormData(form);
            const name = formData.get("name");
            const email = formData.get("email");

            setCookie(formConfig.nameCookie, name, 7);
            setCookie(formConfig.emailCookie, email, 7);

            updateCookieCount();
            document.getElementById("dataDisplay").textContent =
              "Form data saved in cookies.";
          });
        });

        document
          .getElementById("showDataButton")
          .addEventListener("click", () => {
            const storedData = forms
              .map((formConfig) => {
                const name = getCookie(formConfig.nameCookie);
                const email = getCookie(formConfig.emailCookie);
                return name && email
                  ? `Form ${formConfig.formId}: Name: ${name}, Email: ${email}`
                  : `Form ${formConfig.formId}: No data found`;
              })
              .join("\n");

            document.getElementById("dataDisplay").textContent = storedData;
          });

        function updateCookieCount() {
          const cookieArray = document.cookie.split(";");
          const formCookieCount = cookieArray.filter((cookie) =>
            cookie.trim().startsWith("form_")
          ).length;
          cookieCountDisplay.textContent = `Total number of form cookies: ${formCookieCount}`;
        }

        function setCookie(name, value, days) {
          let expires = "";
          if (days) {
            const date = new Date();
            date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
            expires = "; expires=" + date.toUTCString();
          }
          document.cookie = name + "=" + (value || "") + expires + "; path=/";
        }

        function getCookie(name) {
          const cookieArray = document.cookie.split(";");
          for (let cookie of cookieArray) {
            let [key, value] = cookie.split("=");
            key = key.trim();
            if (key === name) {
              return value ? decodeURIComponent(value.trim()) : "";
            }
          }
          return null;
        }

        // Initial cookie count update on page load
        updateCookieCount();
      });
    </script>
  </body>
</html>
